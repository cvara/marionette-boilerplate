!function(e,t){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,s){t(e,s)});else if("undefined"!=typeof exports){var s=require("backbone"),c=require("underscore");module.exports=t(s,c)}else t(e.Backbone,e._)}(this,function(e,t){e.Picky=function(e,t){var s={};s.SingleSelect=function(e){this.collection=e},t.extend(s.SingleSelect.prototype,{select:function(e){e&&this.selected===e||(this.deselect(),this.selected=e,this.selected.select(),this.trigger("select:one",e))},deselect:function(e){this.selected&&(e=e||this.selected,this.selected===e&&(this.selected.deselect(),this.trigger("deselect:one",this.selected),delete this.selected))}}),s.MultiSelect=function(e){this.collection=e,this.selected={}},t.extend(s.MultiSelect.prototype,{select:function(e){this.selected[e.cid]||(this.selected[e.cid]=e,e.select(),c(this))},deselect:function(e){this.selected[e.cid]&&(delete this.selected[e.cid],e.deselect(),c(this))},selectAll:function(){this.each(function(e){e.select()}),c(this)},selectNone:function(){0!==this.selectedLength&&(this.each(function(e){e.deselect()}),c(this))},toggleSelectAll:function(){this.selectedLength===this.length?this.selectNone():this.selectAll()}}),s.Selectable=function(e){this.model=e},t.extend(s.Selectable.prototype,{select:function(){this.selected||(this.selected=!0,this.trigger("selected",this),this.collection&&this.collection.select(this))},deselect:function(){this.selected&&(this.selected=!1,this.trigger("deselected",this),this.collection&&this.collection.deselect(this))},toggleSelected:function(){this.selected?this.deselect():this.select()}});var c=function(e){e.selectedLength=t.size(e.selected);var s=e.selectedLength,c=e.length;return s===c?void e.trigger("select:all",e):0===s?void e.trigger("select:none",e):s>0&&c>s?void e.trigger("select:some",e):void 0};return s}(e,t)});